"use strict";const e=require("../../common/vendor.js"),a=require("../../request/index.js");if(!Array){(e.resolveComponent("van-field")+e.resolveComponent("van-cell-group")+e.resolveComponent("van-datetime-picker")+e.resolveComponent("van-popup")+e.resolveComponent("van-button")+e.resolveComponent("van-overlay"))()}const l={__name:"publish",setup(l){const u=e.index.getStorageSync("sessionCookie"),r=e.ref(null),v=e.ref(!0);e.onLoad((e=>{if(e.index&&(v.value=!1,r.value=parseInt(e.index)),"content"in e){v.value=!0;let a=JSON.parse(e.content);console.log(a),r.value=a.type,y.value=a.deliveryId,s.value=a.name,h.value=a.phoneEnd,x.value=a.studentId,q.value=a.storeName,I.value=a.num,D.value=a.deliveryMoney,w.value=a.title,ee.value=a.content,S.value=a.context,M.value=a.runningRange,p({detail:a.deliveryTime}),p({detail:a.dateTime}),E.value=a.kg,J.value=a.subject,F.value=a.sex,L.value=a.dormitoryId,_.value=a.roomId,U.value=a.score,W.value=a.address,Z.value=a.money+"元"}r.value>=8&&(oe.value.sex="男")}));const d=e.ref({minDate:(new Date).getTime(),maxDate:new Date("2025/10/1"),minHour:8,maxHour:23}),t=e.ref("请选择送达时间"),o=e.ref(!1),n=()=>{v.value||(o.value=!0)};let i=!0;const p=e=>{if(o.value=!1,e.detail&&i){let a=new Date(e.detail),l=a.getFullYear()+"年"+(a.getMonth()-"0"+1).toString()+"月"+a.getDate()+"日"+a.getHours()+"时"+a.getMinutes()+"分";t.value=l,O.value=l,z.value=l,A.value=l,G.value=l,Q.value=l,oe.value.deliveryTime=a.getTime(),oe.value.dateTime=a.getTime(),v.value&&(i=!1)}},m=()=>{o.value=!1,v&&ue(oe.value.dateTime||"")},y=e.ref(""),c=e=>{ue(e.detail.value),oe.value.deliveryId=parseInt(e.detail.value)},s=e.ref(""),b=e=>{ue(e.detail.value),oe.value.name=e.detail.value},h=e.ref(""),g=e=>{ue(e.detail.value),oe.value.phoneEnd=e.detail.value},x=e.ref(""),f=e=>{oe.value.studentId=e.detail.value},q=e.ref(""),T=e=>{ue(e.detail.value),oe.value.storeName=e.detail.value},I=e.ref(""),k=e=>{ue(e.detail.value),oe.value.num=parseInt(e.detail.value)},D=e.ref(""),j=e=>{ue(e.detail.value),oe.value.deliveryMoney=parseInt(e.detail.value)},w=e.ref(""),C=e=>{ue(e.detail.value),oe.value.title=e.detail.value},S=e.ref(""),H=e=>{ue(e.detail.value),oe.value.context=e.detail.value},M=e.ref(""),N=e=>{ue(e.detail.value),oe.value.runningRange=e.detail.value},O=e.ref("请选择起跑预计时间"),E=e.ref(""),R=e=>{ue(e.detail.value),oe.value.kg=parseInt(e.detail.value)},z=e.ref("请选择开始预计时间"),J=e.ref(""),P=e=>{ue(e.detail.value),oe.value.subject=e.detail.value},A=e.ref("请选择上课时间"),F=e.ref(""),K=e=>{ue(e.detail.value),oe.value.sex=e.detail.value},L=e.ref(""),Y=e=>{ue(e.detail.value),oe.value.dormitoryId=e.detail.value},_=e.ref(""),B=e=>{ue(e.detail.value),oe.value.roomId=e.detail.value},G=e.ref("请输入查寝时间"),Q=e.ref("请选择考试时间"),U=e.ref(""),V=e=>{ue(e.detail.value),oe.value.score=parseInt(e.detail.value)},W=e.ref(""),X=e=>{ue(e.detail.value),oe.value.address=e.detail.value},Z=e.ref(""),$=e=>{ue(e.detail.value),oe.value.money=parseInt(e.detail.value)},ee=e.ref(""),ae=e=>{oe.value.content=e.detail.value},le=e.ref(!1),ue=e=>{0==e.trim().length||null==e?le.value=!1:le.value=!0},re=e.ref(!1),ve=()=>{re.value=!1},de=e.ref(!1),te=e.ref(""),oe=e.ref({}),ne=async()=>{le.value?await a.request({url:"submitOrder/add",method:"POST",data:{content:JSON.stringify(oe.value),id:"",schoolId:1,submit_index:r.value},header:{"content-type":"application/json",Cookie:u}}).then((a=>{me(r.value),0==a.data.code&&pe?(te.value="发布成功",de.value=!0,setTimeout((()=>{de.value=!1,e.index.switchTab({url:"/pages/index/index"})}),3e3)):(te.value="请填写必要信息",de.value=!0,setTimeout((()=>{de.value=!1}),800))})):re.value=!0};let ie=[["deliveryId","address","deliveryTime","money"],["name","phoneEnd","address","deliveryTime","money"],["name",,"address","deliveryTime","money"],["storeName","num","deliveryMoney","deliveryTime","address"],["title","context","money","deliveryTime","address"],["runningRange","dateTime","address","money"],["kg","dateTime","address","money"],["subject","address","dateTime","sex","money"],["dormitoryId","roomId","dateTime","sex","money"],["subject","address","dateTime","score","sex","money"]],pe=!1;const me=e=>{let a=Object.keys(oe.value);pe=!0,ie[e-1].forEach((e=>{a.includes(e)||(pe=!1)}))};return(a,l)=>e.e({a:1==r.value},1==r.value?{b:e.o(c),c:e.p({type:"number",required:!0,clearable:!0,label:"快递号",placeholder:"请输入快递号",value:y.value,readonly:v.value}),d:e.o(X),e:e.p({label:"地址",placeholder:"请输入地址",maxlength:16,required:!0,value:W.value,readonly:v.value}),f:e.t(t.value),g:e.o(n),h:e.o($),i:e.p({label:"酬金",type:"digit",placeholder:"请输入酬金额度",required:!0,value:Z.value,readonly:v.value})}:2==r.value?{k:e.o(b),l:e.p({required:!0,clearable:!0,label:"姓名",maxlength:6,placeholder:"请输入取外卖姓名",value:s.value,readonly:v.value}),m:e.o(g),n:e.p({required:!0,clearable:!0,label:"手机号后4位",type:"number",maxlength:4,placeholder:"请输入手机号后4位",value:h.value,readonly:v.value}),o:e.o(X),p:e.p({label:"地址",placeholder:"请输入地址",maxlength:16,required:!0,value:W.value,readonly:v.value}),q:e.t(t.value),r:e.o(n),s:e.o($),t:e.p({label:"酬金",type:"number",placeholder:"请输入酬金额度",required:!0,value:Z.value,readonly:v.value})}:3==r.value?{w:e.o(b),x:e.p({required:!0,clearable:!0,label:"姓名",maxlength:6,placeholder:"请输入姓名",value:s.value,readonly:v.value}),y:e.o(f),z:e.p({clearable:!0,label:"学号",maxlength:18,placeholder:"请输入学号",value:x.value,readonly:v.value}),A:e.o(X),B:e.p({label:"地址",placeholder:"请输入交付地址",maxlength:16,required:!0,value:W.value,readonly:v.value}),C:e.t(t.value),D:e.o(n),E:e.o($),F:e.p({label:"酬金",type:"number",placeholder:"请输入酬金额度",required:!0,value:Z.value,readonly:v.value})}:4==r.value?{H:e.o(T),I:e.p({required:!0,clearable:!0,label:"商品名称",maxlength:18,placeholder:"请输入商品名称",value:q.value,readonly:v.value}),J:e.o(k),K:e.p({required:!0,clearable:!0,label:"商品数量",type:"digit",maxlength:3,placeholder:"请输入商品数量",value:I.value,readonly:v.value}),L:e.o(j),M:e.p({required:!0,clearable:!0,label:"酬金",type:"digit",maxlength:3,placeholder:"请输入酬金金额",value:D.value,readonly:v.value}),N:e.t(t.value),O:e.o(n),P:e.o(X),Q:e.p({label:"地址",placeholder:"请输入地址",maxlength:16,required:!0,value:W.value,readonly:v.value})}:5==r.value?{S:e.o(C),T:e.p({required:!0,clearable:!0,label:"标题",maxlength:18,placeholder:"例:打水",value:w.value,readonly:v.value}),U:e.o(H),V:e.p({required:!0,clearable:!0,label:"具体细节",maxlength:25,placeholder:"",value:S.value,readonly:v.value}),W:e.o($),X:e.p({label:"酬金",type:"digit",placeholder:"请输入酬金额度",required:!0,value:Z.value,readonly:v.value}),Y:e.t(z.value),Z:e.o(n),aa:e.o(X),ab:e.p({label:"地址",placeholder:"请输入地址",maxlength:16,required:!0,value:W.value,readonly:v.value})}:6==r.value?{ad:e.o(N),ae:e.p({required:!0,clearable:!0,label:"跑步距离",maxlength:10,placeholder:"例:800米",value:M.value,readonly:v.value}),af:e.t(O.value),ag:e.o(n),ah:e.o(X),ai:e.p({label:"地址",placeholder:"请输入地址",maxlength:16,required:!0,value:W.value,readonly:v.value}),aj:e.o($),ak:e.p({label:"酬金",type:"digit",placeholder:"请输入酬金额度",required:!0,value:Z.value,readonly:v.value})}:7==r.value?{am:e.o(R),an:e.p({required:!0,clearable:!0,label:"Kg",maxlength:3,placeholder:"单位kg默认为kg",type:"number",value:E.value,readonly:v.value}),ao:e.t(z.value),ap:e.o(n),aq:e.o(X),ar:e.p({label:"地址",placeholder:"请输入地址",maxlength:16,required:!0,value:W.value,readonly:v.value}),as:e.o($),at:e.p({label:"酬金",type:"digit",placeholder:"请输入酬金额度",required:!0,value:Z.value,readonly:v.value})}:8==r.value?e.e({aw:e.o(P),ax:e.p({required:!0,clearable:!0,label:"科目",maxlength:16,placeholder:"请输入上课科目",value:J.value,readonly:v.value}),ay:e.o(X),az:e.p({label:"地址",placeholder:"请输入地址",maxlength:16,required:!0,value:W.value,readonly:v.value}),aA:e.t(A.value),aB:e.o(n),aC:!v.value},v.value?{aE:e.t(F.value)}:{aD:e.o(K)},{aF:e.o($),aG:e.p({label:"酬金",type:"digit",placeholder:"请输入酬金额度",required:!0,value:Z.value,readonly:v.value})}):9==r.value?e.e({aI:e.o(Y),aJ:e.p({required:!0,clearable:!0,label:"宿舍楼号",maxlength:10,placeholder:"请输入宿舍楼号",value:L.value,readonly:v.value}),aK:e.o(B),aL:e.p({required:!0,clearable:!0,label:"房间号",maxlength:10,placeholder:"请输入房间号",value:_.value,readonly:v.value}),aM:e.t(G.value),aN:e.o(n),aO:!v.value},v.value?{aQ:e.t(F.value)}:{aP:e.o(K)},{aR:e.o($),aS:e.p({label:"酬金",type:"digit",placeholder:"请输入酬金额度",required:!0,value:Z.value,readonly:v.value})}):10==r.value?e.e({aU:e.o(P),aV:e.p({required:!0,clearable:!0,label:"科目",maxlength:10,placeholder:"请输入考试科目",value:J.value,readonly:v.value}),aW:e.o(X),aX:e.p({required:!0,clearable:!0,label:"考试地点",maxlength:20,placeholder:"请输入考试地点",value:W.value,readonly:v.value}),aY:e.t(Q.value),aZ:e.o(n),ba:e.o(V),bb:e.p({required:!0,clearable:!0,label:"预期分数",maxlength:2,type:"number",placeholder:"请输入预期分数",value:U.value,readonly:v.value}),bc:!v.value},v.value?{be:e.t(F.value)}:{bd:e.o(K)},{bf:e.o($),bg:e.p({label:"酬金",type:"digit",placeholder:"请输入酬金额度",required:!0,value:Z.value,readonly:v.value})}):{},{j:2==r.value,v:3==r.value,G:4==r.value,R:5==r.value,ac:6==r.value,al:7==r.value,av:8==r.value,aH:9==r.value,aT:10==r.value,bh:e.o(ae),bi:e.p({label:"备注",placeholder:"请输入备注信息50字以内",maxlength:50,type:"textarea",value:ee.value,readonly:v.value}),bj:e.o(p),bk:e.o(m),bl:e.p({type:"datetime",minDate:d.value.minDate,maxDate:d.value.maxDate,minHour:d.value.minHour}),bm:e.p({show:o.value,round:!0,position:"bottom",customStyle:"height: 40%"}),bn:e.o(ve),bo:e.p({type:"primary",size:"large",round:!0,color:"linear-gradient(to right, #ff2950, #f64a06)"}),bp:e.p({show:re.value}),bq:e.t(te.value),br:e.p({show:de.value}),bs:!v.value},v.value?{}:{bt:e.o(ne),bv:e.p({type:"primary",round:!0,size:"large"})})}};wx.createPage(l);
